# Debugging Third Party Code

## View Third-Party Source Code

Within the settings for the C# extension, enable Omnsharp decompilation support.  With this setting enabled, it is possible to see the third-party's source code in the editor.  Holding the `ctrl` button and clicking on a symbol within VS Code's editor will display the source code for the symbol in a new editor.  To accomplish this, presently Omnisharp is using `ILSpy` to decompile the assembly and display the source code.

## Stepping in to Third-Party Code

### Fetch Symbols for Third-Party Library
#### `launch.json` - `symbolOptions`

```json
{
    "version": "0.2.0",
    "configurations": [
        ...
        {
            ...
            "symbolOptions": {
                "searchPaths": ["https://symbols.nuget.org/download/symbols"],
                "searchMicrosoftSymbolServer": true,
                "searchNuGetOrgSymbolServer": true,
                "cachePath": "~/.dotnet/symbolcache"
            }
            ...
        }
        ...
    ]
}
```

To debug code, the debugger requires symbol (`.pdb`) files.  The compiler produces symbol files during the compilation process, so when the project under development is built, symbol files are created and available for the debugger to use.

The symbol files for third-party NuGet packages is not available becuase those packages have not been compiled on the local development machine.  However, it is possible to obtain the symbol files for a third-party NuGet package.

Symbol files (`.pdb` files) are usually hosted on a symbol server.  Adding the URI for the symbol server to the `searchPaths` array (as shown in the example above) allows VS Code to find and download the `.pdb` file for the referenced `.dll`.

To prevent VS Code from downloading symbol (`.pdb`) files each time the program is launched, specify a directory on the machine to cache the symbol files by setting the `cachePath` property (as shown in the example above).

After symbol files have been obtained, it is possible to instrcut the debugger to use them to step in to third-party code.

### Fetch Symbols for Third-Party Library
#### `launch.json` - `justMyCode`

```json
{
    "version": "0.2.0",
    "configurations": [
        ...
        {
            ...
            "justMyCode": false
            ...
        }
        ...
    ]
}
```

Setting the `justMyCode` property to `false` (as shown in the example above) instructs the debugger to **TRY** and step into third-party code.  The key word is **TRY**.  If the symbol files that contain the symbol (function name), cannot be located by the debugger, then the debugger can **NOT** step into the third-party library's source code.  This is why the symbol files are fetched from the symbol server before the `justMyCode` property is set to `false`.

## Setting a Breakpoint in Third-Party Source Code

Is this possible without downloading the source code?

What if the decompiled source code generated by Omnisharp (when `RosylnExtensionsOptions.enableDecompilationSupport` is true) can be added to the `launch.json` `symbolOptions.serachPaths` array?

